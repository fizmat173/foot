import{A as V,y as p,w as x,x as m,v as y,t as F}from"./VTextField-BrV6zuLb.js";import{_ as T,q as h,c as P,s as S,a as l,w as r,o as d,k as c,b as f,t as u,v as E}from"./index-DnhT95W4.js";import{V as C,a as k}from"./VDatePicker-DuWNrorC.js";import{V as g,a as v}from"./VSelect-NaGDt1If.js";const _={data(){return{dateFrom:null,dateTo:null,showDatePickerFrom:!1,showDatePickerTo:!1,matches:[],isLoading:!1,headers:[{key:"utcDate",title:"Дата, время"},{key:"status",title:"Статус"},{key:"teams",title:"Команды"},{key:"score",title:"Счет"}]}},computed:{formattedDateFrom(){return this.dateFrom?this.formatDate(this.dateFrom):""},formattedDateTo(){return this.dateTo?this.formatDate(this.dateTo):""},filteredMatches(){return this.matches.filter(o=>{const e=new Date(o.utcDate),n=this.dateFrom?new Date(this.dateFrom):null;let s=this.dateTo?new Date(this.dateTo):null;return s&&s.setHours(23,59,59,999),!(n&&e<n||s&&e>s)})}},mounted(){this.loadMatches()},methods:{formatDate(o){const e=typeof o=="string"?new Date(o):o,n=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return`${n}.${s}.${a}`},clearDate(o){o==="from"?this.dateFrom=null:this.dateTo=null},clearFilter(){this.dateFrom=null,this.dateTo=null,this.showDatePickerFrom=!1,this.showDatePickerTo=!1},getStatusText(o){return{FINISHED:"Матч завершен",SCHEDULED:"Запланирован",LIVE:"В прямом эфире",TIMED:"Назначен",CANCELED:"Отменен",SUSPENDED:"Приостановлен",POSTPONED:"Отложен",IN_PLAY:"В игре"}[o]||o},getStatusColor(o){return{FINISHED:"green",SCHEDULED:"blue",LIVE:"red",TIMED:"orange",CANCELED:"grey",SUSPENDED:"amber",POSTPONED:"deep-purple",IN_PLAY:"light-green"}[o]||"grey"},loadMatches(){this.isLoading=!0;const o=this.$route.query.id;V.get(`api/v4/teams/${o}/matches`).then(e=>{this.matches=e.data.matches}).catch(e=>console.error("Ошибка при загрузке матчей:",e)).finally(()=>{this.isLoading=!1})},formatScore(o){if(!o)return"-:-";const e=[],n=o.fullTime||{};e.push(n.home!=null&&n.away!=null?`${n.home}:${n.away}`:"-:-");const s=o.extraTime||{};s.home!=null&&s.away!=null&&e.push(`(${s.home}:${s.away})`);const a=o.penalties||{};return a.home!=null&&a.away!=null&&e.push(`(${a.home}:${a.away})`),e.join(" ")}}},N={key:0},L={key:1};function b(o,e,n,s,a,i){return d(),h("div",null,[a.isLoading?(d(),P(x,{key:0,class:"d-block mx-auto my-8",color:"primary",indeterminate:""})):S("",!0),l(p,null,{default:r(()=>[l(m,{cols:"12"},{default:r(()=>e[10]||(e[10]=[c("h2",{class:"text-h5 font-weight-bold mb-4"},"Матчи",-1)])),_:1,__:[10]})]),_:1}),l(p,{class:"date-picker-row",dense:"",align:"center","no-gutters":""},{default:r(()=>[l(m,{cols:"auto",class:"d-flex align-center"},{default:r(()=>[e[11]||(e[11]=c("span",{style:{"margin-right":"8px","white-space":"nowrap"}},"с",-1)),l(y,{"model-value":i.formattedDateFrom,label:"Дата с",readonly:"",clearable:"","prepend-inner-icon":"mdi-calendar",onClick:e[0]||(e[0]=t=>a.showDatePickerFrom=!0),"onClick:clear":e[1]||(e[1]=t=>i.clearDate("from")),outlined:"",style:{"min-width":"220px"}},null,8,["model-value"]),l(g,{modelValue:a.showDatePickerFrom,"onUpdate:modelValue":e[4]||(e[4]=t=>a.showDatePickerFrom=t),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},{default:r(()=>[l(k,{modelValue:a.dateFrom,"onUpdate:modelValue":[e[2]||(e[2]=t=>a.dateFrom=t),e[3]||(e[3]=t=>a.showDatePickerFrom=!1)],"first-day-of-week":"1"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1,__:[11]}),l(m,{cols:"auto",style:{width:"24px"}}),l(m,{cols:"auto",class:"d-flex align-center"},{default:r(()=>[e[12]||(e[12]=c("span",{style:{"margin-right":"8px","white-space":"nowrap"}},"по",-1)),l(y,{"model-value":i.formattedDateTo,label:"Дата по",readonly:"",clearable:"","prepend-inner-icon":"mdi-calendar",onClick:e[5]||(e[5]=t=>a.showDatePickerTo=!0),"onClick:clear":e[6]||(e[6]=t=>i.clearDate("to")),outlined:"",style:{"min-width":"220px"}},null,8,["model-value"]),l(g,{modelValue:a.showDatePickerTo,"onUpdate:modelValue":e[9]||(e[9]=t=>a.showDatePickerTo=t),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},{default:r(()=>[l(k,{modelValue:a.dateTo,"onUpdate:modelValue":[e[7]||(e[7]=t=>a.dateTo=t),e[8]||(e[8]=t=>a.showDatePickerTo=!1)],"first-day-of-week":"1"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1,__:[12]})]),_:1}),l(p,null,{default:r(()=>[l(m,null,{default:r(()=>[l(F,{onClick:i.clearFilter},{default:r(()=>e[13]||(e[13]=[f("Очистить фильтр")])),_:1,__:[13]},8,["onClick"])]),_:1})]),_:1}),l(C,{headers:a.headers,items:i.filteredMatches},{"item.utcDate":r(({item:t})=>[f(u(new Date(t.utcDate).toLocaleString()),1)]),"item.status":r(({item:t})=>[l(v,{color:i.getStatusColor(t.status),small:""},{default:r(()=>[f(u(i.getStatusText(t.status)),1)]),_:2},1032,["color"])]),"item.teams":r(({item:t})=>{var D,w;return[c("b",null,u((D=t.homeTeam)==null?void 0:D.name),1),f(" - "+u((w=t.awayTeam)==null?void 0:w.name),1)]}),"item.score":r(({item:t})=>[t.score?(d(),h("div",N,u(i.formatScore(t.score)),1)):(d(),h("span",L,"-:-"))]),_:1},8,["headers","items"])])}const I=T(_,[["render",b],["__scopeId","data-v-7cc50c15"]]),M={components:{Team:I}};function U(o,e,n,s,a,i){const t=E("Team",!0);return d(),h("div",null,[l(t)])}const $=T(M,[["render",U]]);export{$ as default};
