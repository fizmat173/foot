import{A as P,y as h,w as F,x as u,v as y,t as E}from"./VTextField-BrV6zuLb.js";import{_ as T,q as p,c as V,s as S,a as r,w as s,o as m,k as c,b as f,t as d}from"./index-DnhT95W4.js";import{V as _,a as g}from"./VDatePicker-DuWNrorC.js";import{V as k,a as C}from"./VSelect-NaGDt1If.js";const v={data(){return{dateFrom:null,dateTo:null,showDatePickerFrom:!1,showDatePickerTo:!1,page:1,itemsPerPage:12,matches:[],isLoading:!1,headers:[{key:"utcDate",title:"Дата, время"},{key:"status",title:"Статус"},{key:"teams",title:"Команды"},{key:"score",title:"Счет"}]}},computed:{formattedDateFrom(){return this.formatDate(this.dateFrom)},formattedDateTo(){return this.formatDate(this.dateTo)},filteredMatches(){return!this.dateFrom&&!this.dateTo?this.matches:this.matches.filter(t=>{const e=new Date(t.utcDate),n=this.dateFrom?new Date(this.dateFrom):null;let l=this.dateTo?new Date(this.dateTo):null;return l&&(l=new Date(l),l.setHours(23,59,59,999)),!(n&&e<n||l&&e>l)})}},mounted(){this.loadMatches()},methods:{formatDate(t){if(!t)return"";const e=typeof t=="string"?new Date(t):t,n=e.getFullYear(),l=(e.getMonth()+1).toString().padStart(2,"0");return`${e.getDate().toString().padStart(2,"0")}.${l}.${n}`},formatDateTime(t){return t?new Date(t).toLocaleString("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):""},clearDate(t){t==="from"?this.dateFrom=null:this.dateTo=null},clearFilter(){this.dateFrom=null,this.dateTo=null,this.showDatePickerFrom=!1,this.showDatePickerTo=!1},getStatusText(t){return{FINISHED:"Матч завершен",SCHEDULED:"Запланирован",LIVE:"В прямом эфире",TIMED:"Назначен",CANCELED:"Отменен",SUSPENDED:"Приостановлен",POSTPONED:"Отложен",IN_PLAY:"В игре"}[t]||t},getStatusColor(t){return{FINISHED:"green",SCHEDULED:"blue",LIVE:"red",TIMED:"orange",CANCELED:"grey",SUSPENDED:"amber",POSTPONED:"deep-purple",IN_PLAY:"light-green"}[t]||t},loadMatches(){this.isLoading=!0;const t=this.$route.query.id;P.get(`api/v4/competitions/${t}/matches`).then(e=>this.matches=e.data.matches).catch(e=>console.error(e)).finally(()=>this.isLoading=!1)},formatScore(t){if(!t)return"-:-";const e=[],n=t.fullTime||{};e.push(n.home!==null&&n.home!==void 0&&n.away!==null&&n.away!==void 0?`${n.home}:${n.away}`:"-:-");const l=t.extraTime||{};l.home!==null&&l.home!==void 0&&l.away!==null&&l.away!==void 0&&e.push(`(${l.home}:${l.away})`);const o=t.penalties||{};return o.home!==null&&o.home!==void 0&&o.away!==null&&o.away!==void 0&&e.push(`(${o.home}:${o.away})`),e.join(" ")}}},b={key:0},M={key:1};function N(t,e,n,l,o,i){return m(),p("div",null,[o.isLoading?(m(),V(F,{key:0,class:"d-block mx-auto my-8",color:"primary",indeterminate:""})):S("",!0),r(h,null,{default:s(()=>[r(u,{cols:"12"},{default:s(()=>e[10]||(e[10]=[c("h2",{class:"text-h5 font-weight-bold mb-4"},"Матчи",-1)])),_:1,__:[10]})]),_:1}),r(h,{class:"date-picker-row",dense:"",align:"center","no-gutters":""},{default:s(()=>[r(u,{cols:"auto",class:"d-flex align-center"},{default:s(()=>[e[11]||(e[11]=c("span",{style:{"margin-right":"8px","white-space":"nowrap"}},"с",-1)),r(y,{"model-value":i.formattedDateFrom,label:"Дата с",readonly:"",clearable:"",onClick:e[0]||(e[0]=a=>o.showDatePickerFrom=!0),"onClick:clear":e[1]||(e[1]=a=>i.clearDate("from")),"prepend-inner-icon":"mdi-calendar",outlined:"",style:{"min-width":"220px"}},null,8,["model-value"]),r(k,{modelValue:o.showDatePickerFrom,"onUpdate:modelValue":e[4]||(e[4]=a=>o.showDatePickerFrom=a),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},{default:s(()=>[r(g,{modelValue:o.dateFrom,"onUpdate:modelValue":[e[2]||(e[2]=a=>o.dateFrom=a),e[3]||(e[3]=a=>o.showDatePickerFrom=!1)],"first-day-of-week":"1"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1,__:[11]}),r(u,{cols:"auto",style:{width:"24px"}}),r(u,{cols:"auto",class:"d-flex align-center"},{default:s(()=>[e[12]||(e[12]=c("span",{style:{"margin-right":"8px","white-space":"nowrap"}},"по",-1)),r(y,{"model-value":i.formattedDateTo,label:"Дата по",readonly:"",clearable:"",onClick:e[5]||(e[5]=a=>o.showDatePickerTo=!0),"onClick:clear":e[6]||(e[6]=a=>i.clearDate("to")),"prepend-inner-icon":"mdi-calendar",outlined:"",style:{"min-width":"220px"}},null,8,["model-value"]),r(k,{modelValue:o.showDatePickerTo,"onUpdate:modelValue":e[9]||(e[9]=a=>o.showDatePickerTo=a),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},{default:s(()=>[r(g,{modelValue:o.dateTo,"onUpdate:modelValue":[e[7]||(e[7]=a=>o.dateTo=a),e[8]||(e[8]=a=>o.showDatePickerTo=!1)],"first-day-of-week":"1"},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1,__:[12]})]),_:1}),r(h,null,{default:s(()=>[r(u,null,{default:s(()=>[r(E,{onClick:i.clearFilter},{default:s(()=>e[13]||(e[13]=[f("Очистить фильтр")])),_:1,__:[13]},8,["onClick"])]),_:1})]),_:1}),r(_,{headers:o.headers,items:i.filteredMatches},{"item.utcDate":s(({item:a})=>[f(d(i.formatDateTime(a.utcDate)),1)]),"item.status":s(({item:a})=>[r(C,{color:i.getStatusColor(a.status),small:""},{default:s(()=>[f(d(i.getStatusText(a.status)),1)]),_:2},1032,["color"])]),"item.teams":s(({item:a})=>{var D,w;return[c("b",null,d((D=a.homeTeam)==null?void 0:D.name),1),f(" - "+d((w=a.awayTeam)==null?void 0:w.name),1)]}),"item.score":s(({item:a})=>[a.score?(m(),p("div",b,d(i.formatScore(a.score)),1)):(m(),p("span",M,"-:-"))]),_:1},8,["headers","items"])])}const x=T(v,[["render",N],["__scopeId","data-v-2b157e1c"]]),L={components:{Matches:x}};function I(t,e,n,l,o,i){const a=x;return m(),V(a)}const O=T(L,[["render",I]]);export{O as default};
