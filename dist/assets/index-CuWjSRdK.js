import{_ as z,c as m,o as i,w as c,a as n,b as v,t as _,p as I,d as O,g as U,u as G,e as V,f as J,h as K,n as S,i as C,m as W,j as X,I as Y,k as d,l as P,q as y,F as x,r as Z}from"./index-DnhT95W4.js";import{V as ee,c as ae,u as te,a as le,b as ne,d as se,e as oe,f as re,g as ie,h as ce,m as ue,i as de,j as me,k as ge,l as fe,n as ye,o as ve,p as _e,q as he,r as pe,s as L,t as ke,v as be,w as Ve,x as Se,y as Ce,z as Pe,A as xe}from"./VTextField-BrV6zuLb.js";import{V as Le,a as ze,b as Ie}from"./VCard-DsTVzcIK.js";const Te={props:{id:{type:Number,required:!0},emblem:{type:String,default:()=>"/src/assets/placeholder.svg"},name:{type:String,required:!0},league:{type:String,default:()=>"Не указано"}},emits:["handle-card-click"]};function Be(e,t,r,a,l,o){return i(),m(Ie,{class:"ma-2",onClick:t[0]||(t[0]=g=>e.$emit("handle-card-click",{id:r.id}))},{default:c(()=>[n(ee,{class:"grey lighten-2",contain:"",height:"100",src:r.emblem},null,8,["src"]),n(Le,null,{default:c(()=>[v(_(r.name),1)]),_:1}),n(ze,null,{default:c(()=>[v(_(r.league),1)]),_:1})]),_:1})}const T=z(Te,[["render",Be],["__scopeId","data-v-128a5ea2"]]),we=ae("v-alert-title"),Ae=I({iconSize:[Number,String],iconSizes:{type:Array,default:()=>[["x-small",10],["small",16],["default",24],["large",28],["x-large",32]]}},"iconSize");function De(e,t){return{iconSize:O(()=>{const a=new Map(e.iconSizes),l=e.iconSize??t()??"default";return a.has(l)?a.get(l):l})}}const Fe=["success","info","warning","error"],Qe=I({border:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:Y,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>Fe.includes(e)},...X(),..._e(),...ve(),...ye(),...Ae(),...fe(),...ge(),...me(),...de(),...W(),...ue({variant:"flat"})},"VAlert"),$e=U()({name:"VAlert",props:Qe(),emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:r,slots:a}=t;const l=G(e,"modelValue"),o=V(()=>{if(e.icon!==!1)return e.type?e.icon??`$${e.type}`:e.icon}),{iconSize:g}=De(e,()=>e.prominent?44:28),{themeClasses:s}=J(e),{colorClasses:B,colorStyles:w,variantClasses:A}=te(()=>({color:e.color??e.type,variant:e.variant})),{densityClasses:D}=le(e),{dimensionStyles:F}=ne(e),{elevationClasses:Q}=se(e),{locationStyles:$}=oe(e),{positionClasses:q}=re(e),{roundedClasses:N}=ie(e),{textColorClasses:M,textColorStyles:R}=ce(()=>e.borderColor),{t:j}=K(),h=V(()=>({"aria-label":j(e.closeLabel),onClick(f){l.value=!1,r("click:close",f)}}));return()=>{const f=!!(a.prepend||o.value),E=!!(a.title||e.title),H=!!(a.close||e.closable),p={density:e.density,icon:o.value,size:g.value};return l.value&&n(e.tag,{class:C(["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${e.border===!0?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},s.value,B.value,D.value,Q.value,q.value,N.value,A.value,e.class]),style:S([w.value,F.value,$.value,e.style]),role:"alert"},{default:()=>{var k,b;return[he(!1,"v-alert"),e.border&&d("div",{key:"border",class:C(["v-alert__border",M.value]),style:S(R.value)},null),f&&d("div",{key:"prepend",class:"v-alert__prepend"},[a.prepend?n(L,{key:"prepend-defaults",disabled:!o.value,defaults:{VIcon:{...p}}},a.prepend):n(pe,P({key:"prepend-icon"},p),null)]),d("div",{class:"v-alert__content"},[E&&n(we,{key:"title"},{default:()=>{var u;return[((u=a.title)==null?void 0:u.call(a))??e.title]}}),((k=a.text)==null?void 0:k.call(a))??e.text,(b=a.default)==null?void 0:b.call(a)]),a.append&&d("div",{key:"append",class:"v-alert__append"},[a.append()]),H&&d("div",{key:"close",class:"v-alert__close"},[a.close?n(L,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>{var u;return[(u=a.close)==null?void 0:u.call(a,{props:h.value})]}}):n(ke,P({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},h.value),null)])]}})}}}),qe={components:{Card:T},data(){return{page:1,itemsPerPage:12,leagues:[],searchQuery:"",isLoading:!1}},computed:{totalPages(){return Math.ceil(this.filteredLeagues.length/this.itemsPerPage)},paginatedLeagues(){const e=(this.page-1)*this.itemsPerPage,t=e+this.itemsPerPage;return this.filteredLeagues.slice(e,t)},filteredLeagues(){if(!this.searchQuery)return this.leagues;const e=this.searchQuery.toLowerCase();return this.leagues.filter(t=>t.name.toLowerCase().includes(e))}},mounted(){this.loadLeagues()},methods:{onSearchInput(){this.page=1},loadLeagues(){this.isLoading=!0,xe.get("api/v4/competitions").then(e=>this.leagues=e.data.competitions).catch(e=>console.error(e)).finally(()=>this.isLoading=!1)},goToLeague(e){this.$router.push(`/league/?id=${e.id}`)}}};function Ne(e,t,r,a,l,o){const g=T;return i(),y("div",null,[n(be,{modelValue:l.searchQuery,"onUpdate:modelValue":t[0]||(t[0]=s=>l.searchQuery=s),class:"mb-4",clearable:"",label:"Поиск по названию лиги",outlined:"","prepend-inner-icon":"mdi-magnify",onInput:o.onSearchInput},null,8,["modelValue","onInput"]),l.isLoading?(i(),m(Ve,{key:0,class:"d-block mx-auto my-8",color:"primary",indeterminate:""})):o.filteredLeagues.length===0?(i(),m($e,{key:1,class:"ma-4",type:"info"},{default:c(()=>[v(_(l.searchQuery?"Ничего не найдено":"Нет доступных лиг"),1)]),_:1})):(i(),y(x,{key:2},[n(Ce,null,{default:c(()=>[(i(!0),y(x,null,Z(o.paginatedLeagues,s=>(i(),m(Se,{key:s.id,cols:"12",lg:"3",md:"4",sm:"6"},{default:c(()=>[n(g,{id:s.id,emblem:s.emblem,league:s.area.name,name:s.name,onHandleCardClick:o.goToLeague},null,8,["id","emblem","league","name","onHandleCardClick"])]),_:2},1024))),128))]),_:1}),n(Pe,{modelValue:l.page,"onUpdate:modelValue":t[1]||(t[1]=s=>l.page=s),class:"mt-4",length:o.totalPages,"total-visible":7},null,8,["modelValue","length"])],64))])}const Me=z(qe,[["render",Ne],["__scopeId","data-v-dac1f263"]]),He={__name:"index",setup(e){return(t,r)=>{const a=Me;return i(),m(a)}}};export{He as default};
